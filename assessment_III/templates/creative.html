
<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8"><title>Sentiment Dashboard</title>
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
  <style>body { padding: 2rem; } #chart-sentiment, #chart-reasons { margin-bottom: 2rem; }</style>
</head>
<body>
  <h1>Twitter Airline Sentiment Dashboard</h1>
  <div class="mb-3">
    <label for="airline-select" class="form-label">Filter by Airline:</label>
    <select id="airline-select" class="form-select" style="max-width:300px;">
      <option>All</option>
    </select>
  </div>
  <h2>Sentiment Distribution</h2><div id="chart-sentiment"></div>
  <h2>Negative Reasons Breakdown</h2><div id="chart-reasons"></div>

  <!-- Load D3 v7 -->
  <script src="https://d3js.org/d3.v7.min.js"></script>
  <script src="../static/js/visualizations.js"></script>
  <script>
    // populate dropdown and redraw charts on change
    d3.csv("/static/data/Kaggle_TwitterUSAirlineSentiment.csv").then(data=>{
      const airlines = Array.from(new Set(data.map(d=>d.airline))).sort();
      const sel = document.getElementById('airline-select');
      airlines.forEach(al=>{
        const opt = document.createElement('option'); opt.value=al; opt.textContent=al; sel.appendChild(opt);
      });
      sel.addEventListener('change',()=> {
        const a = sel.value;
        drawSentiment(a);
        drawReasons(a);
      });
    });
  </script>
</body>
</html>
